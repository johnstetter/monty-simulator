/**
 * Door styles and animations for Monty Hall Simulator
 * Modern, futuristic door design with smooth interactions
 */

/* Doors container */
.doors-container {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--spacing-xl);
  margin: var(--spacing-2xl) 0;
  padding: var(--spacing-lg);
  perspective: 1000px;
  min-height: 300px;
}

/* Individual door styling */
.door {
  position: relative;
  width: 180px;
  height: 280px;
  background: linear-gradient(145deg, var(--door-color) 0%, #6d4c41 50%, #5d4037 100%);
  border: 3px solid #4a2c2a;
  border-radius: var(--border-radius-lg);
  cursor: pointer;
  transition: all var(--transition-normal);
  box-shadow:
    var(--shadow-lg),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.2);

  /* 3D effect */
  transform-style: preserve-3d;

  /* Door panel details */
  background-image:
    linear-gradient(90deg, transparent 10%, rgba(0,0,0,0.05) 11%, rgba(0,0,0,0.05) 89%, transparent 90%),
    linear-gradient(0deg, transparent 10%, rgba(0,0,0,0.05) 11%, rgba(0,0,0,0.05) 89%, transparent 90%);

  /* Subtle wood grain texture */
  background-size: 20px 20px, 100% 30px;

  /* Make focusable */
  outline: none;
}

/* Door hover effect */
.door:hover {
  transform: translateY(-8px) rotateX(5deg);
  box-shadow:
    0 20px 40px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.25);
  border-color: var(--primary-color);
}

.door:active {
  transform: translateY(-4px) rotateX(2deg);
}

/* Door number styling */
.door-number {
  position: absolute;
  top: var(--spacing-lg);
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 40px;
  background: linear-gradient(145deg, #ffd700, #ffb300);
  border: 2px solid #ff8f00;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: var(--font-size-lg);
  color: #1a1a1a;
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  transition: all var(--transition-fast);
}

/* Door handle */
.door::before {
  content: '';
  position: absolute;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  width: 12px;
  height: 30px;
  background: linear-gradient(145deg, #c0c0c0, #808080);
  border-radius: 6px;
  box-shadow:
    2px 0 4px rgba(0, 0, 0, 0.3),
    inset 1px 0 0 rgba(255, 255, 255, 0.3);
  transition: all var(--transition-fast);
}

/* Door keyhole */
.door::after {
  content: '';
  position: absolute;
  right: 25px;
  top: calc(50% + 45px);
  width: 4px;
  height: 4px;
  background: #2c1810;
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.8);
}

/* Door content icons */
.door-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 4rem;
  transition: all var(--transition-normal);
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  opacity: 0;
  animation: iconReveal 0.6s ease-out forwards;
}

.car-icon {
  filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
}

.goat-icon {
  filter: drop-shadow(0 0 10px rgba(139, 69, 19, 0.4));
}

/* Door state styles */

/* Selected door */
.door.selected {
  background: linear-gradient(145deg, var(--primary-color) 0%, var(--primary-dark) 50%, #0d47a1 100%);
  border-color: var(--primary-light);
  transform: translateY(-5px) rotateX(3deg);
  box-shadow:
    0 15px 30px rgba(25, 118, 210, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.2),
    inset 0 -1px 0 rgba(0, 0, 0, 0.3);
}

.door.selected .door-number {
  background: linear-gradient(145deg, #ffffff, #e3f2fd);
  color: var(--primary-color);
  border-color: var(--primary-light);
  animation: selectedPulse 2s ease-in-out infinite;
}

.door.selected::before {
  background: linear-gradient(145deg, #ffffff, #90caf9);
  box-shadow:
    2px 0 4px rgba(25, 118, 210, 0.4),
    inset 1px 0 0 rgba(255, 255, 255, 0.5);
}

/* Revealed door (with goat) */
.door.revealed {
  background: linear-gradient(145deg, var(--error-color) 0%, #d32f2f 50%, #c62828 100%);
  border-color: #f44336;
  transform: rotateY(-25deg) translateZ(-20px);
  opacity: 0.7;
  pointer-events: none;
  animation: doorReveal 0.8s ease-out;
}

.door.revealed .door-number {
  background: linear-gradient(145deg, #ffebee, #ffcdd2);
  color: var(--error-color);
  border-color: #f44336;
}

.door.revealed::before {
  background: linear-gradient(145deg, #ffcdd2, #f44336);
}

/* Final choice door */
.door.final-choice {
  animation: finalChoice 1s ease-out;
}

/* Winning door */
.door.winner {
  background: linear-gradient(145deg, var(--success-color) 0%, #388e3c 50%, #2e7d32 100%);
  border-color: var(--success-color);
  animation: winnerCelebration 2s ease-out;
}

.door.winner .door-number {
  background: linear-gradient(145deg, #e8f5e8, #c8e6c9);
  color: var(--success-color);
  border-color: var(--success-color);
  animation: winnerPulse 0.5s ease-in-out infinite alternate;
}

.door.winner::before {
  background: linear-gradient(145deg, #c8e6c9, var(--success-color));
}

/* Car door (shows the car) */
.door.car .door-icon {
  animation: carReveal 1s ease-out;
}

/* Door interaction animations */

/* Selecting animation */
.door.selecting {
  animation: doorSelect 0.3s ease-out;
}

/* Revealing animation */
.door.revealing {
  animation: doorRevealStart 0.5s ease-out;
}

/* Final revealing animation */
.door.final-revealing {
  animation: doorFinalReveal 0.8s ease-out;
}

/* Keyframe animations */

@keyframes selectedPulse {
  0%, 100% {
    transform: translateX(-50%) scale(1);
    box-shadow:
      0 4px 8px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
  50% {
    transform: translateX(-50%) scale(1.1);
    box-shadow:
      0 6px 12px rgba(25, 118, 210, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.5);
  }
}

@keyframes doorSelect {
  0% {
    transform: translateY(0) rotateX(0deg);
  }
  50% {
    transform: translateY(-15px) rotateX(10deg);
  }
  100% {
    transform: translateY(-5px) rotateX(3deg);
  }
}

@keyframes doorRevealStart {
  0% {
    transform: rotateY(0deg);
  }
  100% {
    transform: rotateY(-15deg);
  }
}

@keyframes doorReveal {
  0% {
    transform: rotateY(-15deg);
    opacity: 1;
  }
  50% {
    transform: rotateY(-35deg) translateZ(-30px);
    opacity: 0.8;
  }
  100% {
    transform: rotateY(-25deg) translateZ(-20px);
    opacity: 0.7;
  }
}

@keyframes doorFinalReveal {
  0% {
    transform: rotateY(0deg);
  }
  30% {
    transform: rotateY(-20deg) translateZ(-15px);
  }
  60% {
    transform: rotateY(10deg) translateZ(10px);
  }
  100% {
    transform: rotateY(0deg) translateZ(0px);
  }
}

@keyframes finalChoice {
  0% {
    transform: scale(1);
    box-shadow: var(--shadow-lg);
  }
  50% {
    transform: scale(1.1) translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
  }
  100% {
    transform: scale(1);
    box-shadow: var(--shadow-lg);
  }
}

@keyframes winnerCelebration {
  0%, 100% {
    transform: translateY(0) scale(1);
  }
  25% {
    transform: translateY(-20px) scale(1.05);
  }
  50% {
    transform: translateY(-10px) scale(1.1);
  }
  75% {
    transform: translateY(-15px) scale(1.05);
  }
}

@keyframes winnerPulse {
  from {
    transform: translateX(-50%) scale(1);
    box-shadow:
      0 4px 8px rgba(0, 0, 0, 0.3),
      0 0 20px rgba(76, 175, 80, 0.6);
  }
  to {
    transform: translateX(-50%) scale(1.15);
    box-shadow:
      0 6px 12px rgba(0, 0, 0, 0.4),
      0 0 30px rgba(76, 175, 80, 0.8);
  }
}

@keyframes iconReveal {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.3) rotateY(90deg);
  }
  50% {
    opacity: 0.7;
    transform: translate(-50%, -50%) scale(1.2) rotateY(0deg);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1) rotateY(0deg);
  }
}

@keyframes carReveal {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.5) rotateZ(-10deg);
    filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.3));
  }
  50% {
    opacity: 0.8;
    transform: translate(-50%, -50%) scale(1.3) rotateZ(5deg);
    filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1) rotateZ(0deg);
    filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
  }
}

/* Loading state */
.door.loading {
  position: relative;
  pointer-events: none;
}

.door.loading::before {
  animation: handleWiggle 0.5s ease-in-out infinite alternate;
}

@keyframes handleWiggle {
  from {
    transform: translateY(-50%) rotateZ(-2deg);
  }
  to {
    transform: translateY(-50%) rotateZ(2deg);
  }
}

/* Disabled state */
.door:disabled,
.door.disabled {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .door {
    border-width: 4px;
    border-color: currentColor;
  }

  .door-number {
    border-width: 3px;
    background: yellow;
    color: black;
  }

  .door.selected {
    background: blue;
    border-color: white;
  }

  .door.revealed {
    background: red;
    border-color: white;
  }

  .door.winner {
    background: green;
    border-color: white;
  }
}

/* Reduced motion alternatives */
@media (prefers-reduced-motion: reduce) {
  .door {
    transition: box-shadow var(--transition-fast), border-color var(--transition-fast);
  }

  .door:hover {
    transform: none;
    box-shadow: 0 0 0 3px var(--primary-color);
  }

  .door.selected {
    transform: none;
    box-shadow: 0 0 0 4px var(--primary-light);
  }

  .door.revealed {
    transform: none;
    opacity: 0.5;
  }

  .door-number {
    animation: none;
  }

  .door-icon {
    animation: none;
    opacity: 1;
  }

  .door.selecting,
  .door.revealing,
  .door.final-revealing {
    animation: none;
  }
}